<!DOCTYPE html>
<html>
<head>
    <title>Test Image Viewer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .image-box { border: 2px solid #ccc; padding: 10px; margin: 20px 0; min-height: 400px; }
        img { max-width: 100%; height: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>BuildTrace Overlay Image Test</h1>

        <div id="status" class="status">Loading...</div>

        <h2>Direct Image Test</h2>
        <div class="image-box">
            <p>Testing direct image URL: /image/new_A-101_new_overlays/A-101_overlay_results/A-101_overlay.png</p>
            <img src="http://localhost:5001/image/new_A-101_new_overlays/A-101_overlay_results/A-101_overlay.png"
                 alt="Overlay Image"
                 onload="document.getElementById('status').className='status success'; document.getElementById('status').innerText='✓ Image loaded successfully!'"
                 onerror="document.getElementById('status').className='status error'; document.getElementById('status').innerText='✗ Failed to load image'">
        </div>

        <h2>API Response</h2>
        <pre id="api-response"></pre>

        <h2>Test Results Page</h2>
        <p>Visit the full results page: <a href="http://localhost:5001/results/02fba4ff-ae16-4c90-8b1b-6c39466cca94" target="_blank">View Results</a></p>
    </div>

    <script>
        // Test API
        fetch('http://localhost:5001/api/drawings/02fba4ff-ae16-4c90-8b1b-6c39466cca94')
            .then(response => response.json())
            .then(data => {
                document.getElementById('api-response').textContent = JSON.stringify(data, null, 2);
            })
            .catch(error => {
                document.getElementById('api-response').textContent = 'Error: ' + error;
            });
    </script>
</body>
</html>